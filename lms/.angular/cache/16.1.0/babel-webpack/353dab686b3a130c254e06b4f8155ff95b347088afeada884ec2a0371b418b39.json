{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let CheckoutComponent = class CheckoutComponent {\n  constructor(product, router) {\n    this.product = product;\n    this.router = router;\n  }\n  ngOnInit() {\n    this.product.currentCart().subscribe(result => {\n      let price = 0;\n      this.cartData = result;\n      result.forEach(item => {\n        if (item.quantity) {\n          price = price + +item.price * +item.quantity;\n        }\n      });\n      this.totalPrice = price + price / 10 + 100 - price / 10;\n      console.warn(this.totalPrice);\n    });\n  }\n  orderNow(data) {\n    let user = localStorage.getItem('user');\n    let userId = user && JSON.parse(user).id;\n    if (this.totalPrice) {\n      let orderData = {\n        ...data,\n        totalPrice: this.totalPrice,\n        userId,\n        id: undefined\n      };\n      this.cartData?.forEach(item => {\n        setTimeout(() => {\n          item.id && this.product.deleteCartItems(item.id);\n        }, 700);\n      });\n      this.product.orderNow(orderData).subscribe(result => {\n        if (result) {\n          this.orderMsg = \"Order has been placed\";\n          setTimeout(() => {\n            this.orderMsg = undefined;\n            this.router.navigate(['/my-orders']);\n          }, 4000);\n        }\n      });\n    }\n  }\n};\nCheckoutComponent = __decorate([Component({\n  selector: 'app-checkout',\n  templateUrl: './checkout.component.html',\n  styleUrls: ['./checkout.component.css']\n})], CheckoutComponent);","map":{"version":3,"names":["Component","CheckoutComponent","constructor","product","router","ngOnInit","currentCart","subscribe","result","price","cartData","forEach","item","quantity","totalPrice","console","warn","orderNow","data","user","localStorage","getItem","userId","JSON","parse","id","orderData","undefined","setTimeout","deleteCartItems","orderMsg","navigate","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\Sree\\lib\\lms\\src\\app\\checkout\\checkout.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { cart, order } from '../data-type';\nimport { ProductService } from '../services/product.service';\n\n@Component({\n  selector: 'app-checkout',\n  templateUrl: './checkout.component.html',\n  styleUrls: ['./checkout.component.css']\n})\nexport class CheckoutComponent implements OnInit {\n\n  totalPrice: number | undefined;\n  cartData: cart[] | undefined;\n  orderMsg: string | undefined;\n  constructor(private product: ProductService, private router: Router) { }\n\n  ngOnInit(): void {\n    this.product.currentCart().subscribe((result) => {\n\n      let price = 0;\n      this.cartData = result;\n      result.forEach((item) => {\n        if (item.quantity) {\n          price = price + (+item.price * +item.quantity)\n        }\n      })\n      this.totalPrice = price + (price / 10) + 100 - (price / 10);\n\n      console.warn(this.totalPrice);\n\n    })\n\n  }\n  orderNow(data: { email: string, address: string, contact: string }) {\n    let user = localStorage.getItem('user');\n    let userId = user && JSON.parse(user).id;\n    if (this.totalPrice) {\n      let orderData: order = {\n        ...data,\n        totalPrice: this.totalPrice,\n        userId,\n        id: undefined\n      }\n\n      this.cartData?.forEach((item) => {\n        setTimeout(() => {\n          item.id && this.product.deleteCartItems(item.id);\n        }, 700)\n      })\n\n      this.product.orderNow(orderData).subscribe((result) => {\n        if (result) {\n          this.orderMsg = \"Order has been placed\";\n          setTimeout(() => {\n            this.orderMsg = undefined;\n            this.router.navigate(['/my-orders'])\n          }, 4000);\n\n        }\n\n      })\n    }\n\n  }\n\n}"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAU1C,WAAMC,iBAAiB,GAAvB,MAAMA,iBAAiB;EAK5BC,YAAoBC,OAAuB,EAAUC,MAAc;IAA/C,KAAAD,OAAO,GAAPA,OAAO;IAA0B,KAAAC,MAAM,GAANA,MAAM;EAAY;EAEvEC,QAAQA,CAAA;IACN,IAAI,CAACF,OAAO,CAACG,WAAW,EAAE,CAACC,SAAS,CAAEC,MAAM,IAAI;MAE9C,IAAIC,KAAK,GAAG,CAAC;MACb,IAAI,CAACC,QAAQ,GAAGF,MAAM;MACtBA,MAAM,CAACG,OAAO,CAAEC,IAAI,IAAI;QACtB,IAAIA,IAAI,CAACC,QAAQ,EAAE;UACjBJ,KAAK,GAAGA,KAAK,GAAI,CAACG,IAAI,CAACH,KAAK,GAAG,CAACG,IAAI,CAACC,QAAS;;MAElD,CAAC,CAAC;MACF,IAAI,CAACC,UAAU,GAAGL,KAAK,GAAIA,KAAK,GAAG,EAAG,GAAG,GAAG,GAAIA,KAAK,GAAG,EAAG;MAE3DM,OAAO,CAACC,IAAI,CAAC,IAAI,CAACF,UAAU,CAAC;IAE/B,CAAC,CAAC;EAEJ;EACAG,QAAQA,CAACC,IAAyD;IAChE,IAAIC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACvC,IAAIC,MAAM,GAAGH,IAAI,IAAII,IAAI,CAACC,KAAK,CAACL,IAAI,CAAC,CAACM,EAAE;IACxC,IAAI,IAAI,CAACX,UAAU,EAAE;MACnB,IAAIY,SAAS,GAAU;QACrB,GAAGR,IAAI;QACPJ,UAAU,EAAE,IAAI,CAACA,UAAU;QAC3BQ,MAAM;QACNG,EAAE,EAAEE;OACL;MAED,IAAI,CAACjB,QAAQ,EAAEC,OAAO,CAAEC,IAAI,IAAI;QAC9BgB,UAAU,CAAC,MAAK;UACdhB,IAAI,CAACa,EAAE,IAAI,IAAI,CAACtB,OAAO,CAAC0B,eAAe,CAACjB,IAAI,CAACa,EAAE,CAAC;QAClD,CAAC,EAAE,GAAG,CAAC;MACT,CAAC,CAAC;MAEF,IAAI,CAACtB,OAAO,CAACc,QAAQ,CAACS,SAAS,CAAC,CAACnB,SAAS,CAAEC,MAAM,IAAI;QACpD,IAAIA,MAAM,EAAE;UACV,IAAI,CAACsB,QAAQ,GAAG,uBAAuB;UACvCF,UAAU,CAAC,MAAK;YACd,IAAI,CAACE,QAAQ,GAAGH,SAAS;YACzB,IAAI,CAACvB,MAAM,CAAC2B,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC;UACtC,CAAC,EAAE,IAAI,CAAC;;MAIZ,CAAC,CAAC;;EAGN;CAED;AAxDY9B,iBAAiB,GAAA+B,UAAA,EAL7BhC,SAAS,CAAC;EACTiC,QAAQ,EAAE,cAAc;EACxBC,WAAW,EAAE,2BAA2B;EACxCC,SAAS,EAAE,CAAC,0BAA0B;CACvC,CAAC,C,EACWlC,iBAAiB,CAwD7B"},"metadata":{},"sourceType":"module","externalDependencies":[]}